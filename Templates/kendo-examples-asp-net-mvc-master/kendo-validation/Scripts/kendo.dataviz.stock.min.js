/*
* Kendo UI Complete v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(e){var t=window.kendo,i=t.Class,o=(t.ui.Widget,t.deepExtend),a=Math,n=e.proxy,s=t.dataviz,r=s.ui.Chart,l=(s.DateCategoryAxis,s.Selection),c=s.duration,p=s.lteDateIndex,d=s.renderTemplate,m=s.toDate,h=s.toTime,u=28,v="k-",f="drag",g="dragEnd",x="_navigator",_=x,b=3,y="zoom",w="zoomEnd",A=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t)},_applyDefaults:function(e,t){var i=this,a=i.element.width()||s.DEFAULT_WIDTH,n={axisDefaults:{categoryAxis:{name:"default",field:e.dateField,majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(a/u)}}};t&&(t=o({},t,n)),i._navigator||D.setup(e,t),r.fn._applyDefaults.call(i,e,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}}},tooltip:{visible:!0},legend:{visible:!1}},_redraw:function(){var e=this,t=e._navigator;t||(t=e._navigator=new D(e)),t.applySelection(),r.fn._redraw.call(e),t.redraw()}}),D=i.extend({init:function(e){var t=this;t.chart=e,t.options=e.options.navigator,e.bind(f,n(t._drag,t)),e.bind(g,n(t._dragEnd,t)),e.bind(y,n(t._zoom,t)),e.bind(w,n(t._zoomEnd,t))},redraw:function(){var t=this,i=t.chart,o=t.mainAxis(),a=o.options.categories,n=t.options.select||{},r=0,c=a.length-1,d=r,h=c;a.length>0&&(n.from&&(d=p(a,m(n.from))),n.to&&(h=p(a,m(n.to))),i._selection=new l(i,o,{from:d,to:h,min:r,max:c,select:e.proxy(t._select,t),selectEnd:e.proxy(t._selectEnd,t)}),t.hint=new S(i.element,{min:a[0],max:s.last(a)}))},_drag:function(e){var t,i,o=this,n=o.chart,r=n._eventCoordinates(e.originalEvent),l=o.mainAxis(),d=l.pane.box.containsPoint(r),h=l.options.categories,u=n._plotArea.categoryAxis,v=u.options.baseUnit,f=e.axisRanges[u.options.name],g=n._selection,x=c(u.options.min,u.options.max,u.options.baseUnit);f&&!d&&(t=m(a.min(a.max(h[0],f.min),s.addDuration(s.last(h),-x,v))),i=m(a.min(s.addDuration(t,x,v),s.last(l.options.categories))),o.options.select={from:t,to:i},o._realtimeDrag()&&(o.applySelection(),o.redrawSlaves()),g.set(p(l.options.categories,t),p(l.options.categories,i)),o.showHint(t,i))},_dragEnd:function(){var e=this;e.applySelection(),e.redrawSlaves(),e.hint.hide()},_realtimeDrag:function(){var e=t.support,i=e.touch,o=e.browser,a=o.mozilla,n=o.msie&&9>o.version;return!i&&!a&&!n},readSelection:function(){var e=this,t=e.mainAxis(),i=t.options.categories,o=e.chart,a=o._selection,n=a.options,s=e.options.select;s.from=i[n.from],s.to=i[n.to]},indexToDate:function(e){var t=this,i=t.mainAxis(),o=i.options.categories,a=t.chart,n=a._selection;return n.options,t.options.select,o[e]},applySelection:function(){var e,t,i=this,o=i.options.select||{},a=i.chart,n=a.options.categoryAxis;for(e=0;n.length>e;e++)t=n[e],t.pane!==x&&(t.min=o.from,t.max=o.to)},redrawSlaves:function(){var e=this,t=e.chart,i=t._plotArea,o=i.panes.slice(0,-1);t._plotArea.redraw(o)},_zoom:function(e){var i=this,o=i.chart,n=e.delta,s=i.mainAxis(),r=o._plotArea.categoryAxis,l=(e.axisRanges[r.options.name],i.options.select),c=o._selection,d=c.options.to-c.options.from;e.originalEvent.preventDefault(),a.abs(n)>1&&(n*=b),d>1?(c.expandLeft(n),i.readSelection()):(r.options.min=l.from,l.from=r.scaleRange(-e.delta).min),t.support.touch||(i.applySelection(),i.redrawSlaves()),i.showHint(i.options.select.from,i.options.select.to),c.set(p(s.options.categories,i.options.select.from),p(s.options.categories,i.options.select.to))},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var i=this,o=i.chart,a=o._plotArea;i.hint.show(e,t,a.backgroundBox())},_select:function(e){var t=this,i=t.chart;i._plotArea,t.showHint(t.indexToDate(e.from),t.indexToDate(e.to))},_selectEnd:function(){var e=this;e.hint.hide(),e.readSelection(),e.applySelection(),e.redrawSlaves()},mainAxis:function(){return this.chart._plotArea.namedCategoryAxes[_]}});D.setup=function(e,t){e=e||{},t=t||{};var i=o({},e.navigator,t.navigator),a=e.panes=[].concat(e.panes);a.push(o({},i.pane,{name:x})),D.attachAxes(e),D.attachSeries(e,i,t)},D.attachAxes=function(e){var t,i;t=e.categoryAxis=[].concat(e.categoryAxis),i=e.valueAxis=[].concat(e.valueAxis);var a={type:"date",pane:x,roundToBaseUnit:!1,justified:!0,tooltip:{visible:!1},labels:{step:1}};t.push(o({},a,{name:_,baseUnit:"fit",maxDateGroups:200,baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),o({},a,{name:_+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[],hours:[1],days:[1],weeks:[],months:[1],years:[1]},majorTicks:{visible:!0}}),o({},a,{name:_+"_ticks",maxDateGroups:200,autoBaseUnitSteps:{minutes:[1],hours:[1],days:[1],weeks:[],months:[1],years:[1]},majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),i.push({name:_,pane:x,majorGridLines:{visible:!1},visible:!1})},D.attachSeries=function(e,t,i){var a,n=e.series=e.series||[],s=[].concat(t.series),r=i.seriesColors,l=t.seriesDefaults;for(a=0;s.length>a;a++)n.push(o({color:r[a%r.length],visibleInLegend:!1,tooltip:{visible:!1}},l,s[a],{axis:_,categoryAxis:_}))};var S=i.extend({init:function(t,i){var a=this;a.options=o({},a.options,i),a.container=t,a.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},a.template=a.template,a.template||(a.template=a.template=d("<div class='"+v+"navigator-hint' "+"style='display: none; position: absolute; top: 1px; left: 1px;'>"+"<div class='"+v+"tooltip'>&nbsp;</div>"+"<div class='"+v+"scroll' />"+"</div>")),a.element=e(a.template()).appendTo(t)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(e,i,o){var a=this,n=m(h(e)+h(i-e)/2),s=a.options,r=t.format(a.options.format,e,i),l=a.element.find("."+v+"tooltip"),c=a.element.find("."+v+"scroll"),p=.4*o.width(),d=o.center().x-p,u=o.center().x,f=u-d,g=s.max-s.min,x=f/g,_=n-s.min;a._hideTimeout&&clearTimeout(a._hideTimeout),a._visible||(a.element.stop(!1,!0).css("visibility","hidden").show(),a._visible=!0),l.text(r).css({left:o.center().x-l.outerWidth()/2,top:o.y1}),c.css({width:p,left:d+_*x,top:o.y1+parseInt(l.css("margin-top"),10)+parseInt(l.css("border-top-width"),10)+l.height()/2}),a.element.css("visibility","visible")},hide:function(){var e=this;e._hideTimeout&&clearTimeout(e._hideTimeout),e._hideTimeout=setTimeout(function(){e._visible=!1,e.element.fadeOut("slow")},e.options.hideDelay)}});s.ui.plugin(A),o(s,{})})(window.kendo.jQuery);